environment:
  fast_finish: true
  pypi_user:
    secure: JqPPu1iW5YANTHA3ie2o9A==
  pypi_pass:
    secure: o55+E9ICiWljWnSSajeGUw==
  matrix:
  - PYTHON: C:\Python27\python.exe
  - PYTHON: C:\Python33\python.exe
  - PYTHON: C:\Python34\python.exe
  - PYTHON: C:\Python35\python.exe
  - PYTHON: C:\pypy2-v5.4.0-win32\pypy.exe
    PYPY_DOWNLOAD: https://bitbucket.org/pypy/pypy/downloads/pypy2-v5.4.0-win32.zip
    PYPY_PATH: C:\pypy2-v5.4.0-win32\
install:
- ps: |
    if ($env:PYPY_DOWNLOAD){
        Invoke-WebRequest $env:PYPY_DOWNLOAD -OutFile C:\pypy.zip
        & '7z' x C:\pypy.zip -oC:\
        $env:PATH += ';' + $env:PYPY_PATH
        & $env:PYTHON -m ensurepip -U
    }
- ps: "& $env:PYTHON -m pip install cffi wheel twine"
- ps: "& $env:PYTHON -m pip install ."
build: off
test: off
deploy_script:
- ps: "& $env:PYTHON -W ignore:.*ABI.*:RuntimeWarning setup.py bdist_wheel"
- if "%APPVEYOR_REPO_TAG%"=="true" ( %PYTHON% -m twine -u %pypi_user% -p %pypi_pass% --skip-existing dist/* )
artifacts:
- path: dist/*
  name: wheel
